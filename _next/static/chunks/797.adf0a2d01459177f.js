"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[797],{2797:(e,s,t)=>{t.r(s),t.d(s,{ExplorerMainContent:()=>f,default:()=>h});var r=t(8941),n=t(9734),a=t.n(n),i=t(7383),l=t(7927),u=t(3485),c=t(8005),d=t(6602),o=t(2952),m=t(3882),p=t(6520);function f(e){let{data:s}=(0,u.ZP)(e.url,async e=>{let s=await fetch(e),t=(await s.json()).map(e=>Object.assign(e,{time:a()(e.pushedAt)}));return{items:t,map:Object.fromEntries(t.map((e,s)=>[e.id,s]))}},{suspense:!0}),t=(0,c.R)(m.W),n=(0,l.useRef)(null);(0,l.useEffect)(()=>{null===n.current&&(n.current=new i.Z({fields:["name","description","tags"],idField:"id"}),n.current.addAllAsync(s.items))}),(0,l.useEffect)(()=>{e.url.includes("selfhosted")&&p.notifications.show({autoClose:3e3,message:(0,r.jsx)("span",{className:"text-xs",children:"Data under CC-BY-SA 3.0 license, by the awesome-selfhosted community."})})},[]);let d=(0,l.useMemo)(()=>{let e=a()();return s.items.filter(s=>{let{time:r,stars:n,forks:a}=s,i=r.add(2,"year").isAfter(e);return(!t.popularOnly||!!(n>3e3||a>3e3))&&(!t.wellMaintainedOnly||!!i)})},[s.items,t.popularOnly,t.wellMaintainedOnly]),f=(0,l.useMemo)(()=>""!==t.search&&n.current?n.current.search(t.search,{boost:{name:2},prefix:!0}).map(e=>{let{id:t}=e;return s.items[s.map[t]]}):"popularity"===t.sort?d.toSorted((e,s)=>-((e.stars||0)-(s.stars||0))):"activity"===t.sort?d.toSorted((e,s)=>-a()(e.time).diff(s.time)):d,[d,t.sort,t.search]);return(0,r.jsx)(o.X,{items:f})}function h(e){return(0,r.jsx)(l.Suspense,{fallback:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"hidden",children:e.trending.map(e=>(0,r.jsx)(d.Z,{repo:e},e.id))}),(0,r.jsx)(d.q,{}),(0,r.jsx)(d.q,{}),(0,r.jsx)(d.q,{}),(0,r.jsx)(d.q,{})]}),children:(0,r.jsx)(f,{url:e.url})})}}}]);